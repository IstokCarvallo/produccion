$PBExportHeader$w_info_planilla_despacho.srw
forward
global type w_info_planilla_despacho from w_para_informes
end type
type st_4 from statictext within w_info_planilla_despacho
end type
type st_1 from statictext within w_info_planilla_despacho
end type
type st_6 from statictext within w_info_planilla_despacho
end type
type em_fecha from editmask within w_info_planilla_despacho
end type
type st_3 from statictext within w_info_planilla_despacho
end type
type st_2 from statictext within w_info_planilla_despacho
end type
type em_planilla from editmask within w_info_planilla_despacho
end type
type em_fecha_des from editmask within w_info_planilla_despacho
end type
type gb_3 from groupbox within w_info_planilla_despacho
end type
type st_5 from statictext within w_info_planilla_despacho
end type
type rb_prod_agri from radiobutton within w_info_planilla_despacho
end type
type rb_fumig_usa from radiobutton within w_info_planilla_despacho
end type
type rb_fumig from radiobutton within w_info_planilla_despacho
end type
type rb_usda from radiobutton within w_info_planilla_despacho
end type
type cbx_varirot from checkbox within w_info_planilla_despacho
end type
type cbx_1 from checkbox within w_info_planilla_despacho
end type
type st_10 from statictext within w_info_planilla_despacho
end type
type st_11 from statictext within w_info_planilla_despacho
end type
type st_12 from statictext within w_info_planilla_despacho
end type
type st_13 from statictext within w_info_planilla_despacho
end type
type em_cansellos from editmask within w_info_planilla_despacho
end type
type em_ubisellos from editmask within w_info_planilla_despacho
end type
type em_numsellos from editmask within w_info_planilla_despacho
end type
type em_nomdespachador from editmask within w_info_planilla_despacho
end type
type st_14 from statictext within w_info_planilla_despacho
end type
type em_nrodespacho from editmask within w_info_planilla_despacho
end type
type st_15 from statictext within w_info_planilla_despacho
end type
type em_exportador from editmask within w_info_planilla_despacho
end type
type em_rut from editmask within w_info_planilla_despacho
end type
type st_16 from statictext within w_info_planilla_despacho
end type
type st_17 from statictext within w_info_planilla_despacho
end type
type cbx_prdrot from checkbox within w_info_planilla_despacho
end type
type cbx_calrot from checkbox within w_info_planilla_despacho
end type
type rb_4 from radiobutton within w_info_planilla_despacho
end type
type rb_5 from radiobutton within w_info_planilla_despacho
end type
type st_19 from statictext within w_info_planilla_despacho
end type
type rb_fumig_mexico from radiobutton within w_info_planilla_despacho
end type
type mle_tratamiento from multilineedit within w_info_planilla_despacho
end type
type st_7 from statictext within w_info_planilla_despacho
end type
type em_puerto from multilineedit within w_info_planilla_despacho
end type
type st_20 from statictext within w_info_planilla_despacho
end type
type em_nominspector from editmask within w_info_planilla_despacho
end type
type cbx_tratado from checkbox within w_info_planilla_despacho
end type
type mle_codsagtrat from multilineedit within w_info_planilla_despacho
end type
type st_21 from statictext within w_info_planilla_despacho
end type
type st_22 from statictext within w_info_planilla_despacho
end type
type st_23 from statictext within w_info_planilla_despacho
end type
type st_24 from statictext within w_info_planilla_despacho
end type
type st_25 from statictext within w_info_planilla_despacho
end type
type mle_condicion from multilineedit within w_info_planilla_despacho
end type
type mle_medida from multilineedit within w_info_planilla_despacho
end type
type mle_producto from multilineedit within w_info_planilla_despacho
end type
type mle_envase from multilineedit within w_info_planilla_despacho
end type
type cbx_inspeccion from checkbox within w_info_planilla_despacho
end type
type cbx_fumigado from checkbox within w_info_planilla_despacho
end type
type cbx_sag from checkbox within w_info_planilla_despacho
end type
type dw_planilla from datawindow within w_info_planilla_despacho
end type
type dw_3 from datawindow within w_info_planilla_despacho
end type
type st_27 from statictext within w_info_planilla_despacho
end type
type st_28 from statictext within w_info_planilla_despacho
end type
type st_29 from statictext within w_info_planilla_despacho
end type
type st_8 from statictext within w_info_planilla_despacho
end type
type em_region from singlelineedit within w_info_planilla_despacho
end type
type em_provi from singlelineedit within w_info_planilla_despacho
end type
type em_comuna from singlelineedit within w_info_planilla_despacho
end type
type cbx_5 from checkbox within w_info_planilla_despacho
end type
type st_30 from statictext within w_info_planilla_despacho
end type
type dw_4 from datawindow within w_info_planilla_despacho
end type
type st_18 from statictext within w_info_planilla_despacho
end type
type st_9 from statictext within w_info_planilla_despacho
end type
type st_32 from statictext within w_info_planilla_despacho
end type
type em_csp from editmask within w_info_planilla_despacho
end type
type st_33 from statictext within w_info_planilla_despacho
end type
type cbx_origen from checkbox within w_info_planilla_despacho
end type
type cbx_oritrata from checkbox within w_info_planilla_despacho
end type
type cbx_usda from checkbox within w_info_planilla_despacho
end type
type cbx_usdainpe from checkbox within w_info_planilla_despacho
end type
type st_35 from statictext within w_info_planilla_despacho
end type
type em_sps from editmask within w_info_planilla_despacho
end type
type st_36 from statictext within w_info_planilla_despacho
end type
type em_tipoprodu from editmask within w_info_planilla_despacho
end type
type st_37 from statictext within w_info_planilla_despacho
end type
type st_38 from statictext within w_info_planilla_despacho
end type
type em_fecharegistro from editmask within w_info_planilla_despacho
end type
type em_fechaenvio from editmask within w_info_planilla_despacho
end type
type st_sellos from statictext within w_info_planilla_despacho
end type
type em_sellos from editmask within w_info_planilla_despacho
end type
type rb_anexo from radiobutton within w_info_planilla_despacho
end type
type uo_selplanta from uo_seleccion_plantas within w_info_planilla_despacho
end type
type uo_selcliente from uo_seleccion_clientesprod within w_info_planilla_despacho
end type
type cbx_recibidor from checkbox within w_info_planilla_despacho
end type
type st_34 from statictext within w_info_planilla_despacho
end type
end forward

global type w_info_planilla_despacho from w_para_informes
integer x = 14
integer y = 32
integer width = 4896
integer height = 2224
string title = "Planilla de Despacho Fruta S.A.G."
boolean minbox = false
boolean maxbox = false
boolean resizable = false
windowtype windowtype = response!
string icon = "F:\Desarrollo\Producción\FrutaProcesada\Producc.ico"
st_4 st_4
st_1 st_1
st_6 st_6
em_fecha em_fecha
st_3 st_3
st_2 st_2
em_planilla em_planilla
em_fecha_des em_fecha_des
gb_3 gb_3
st_5 st_5
rb_prod_agri rb_prod_agri
rb_fumig_usa rb_fumig_usa
rb_fumig rb_fumig
rb_usda rb_usda
cbx_varirot cbx_varirot
cbx_1 cbx_1
st_10 st_10
st_11 st_11
st_12 st_12
st_13 st_13
em_cansellos em_cansellos
em_ubisellos em_ubisellos
em_numsellos em_numsellos
em_nomdespachador em_nomdespachador
st_14 st_14
em_nrodespacho em_nrodespacho
st_15 st_15
em_exportador em_exportador
em_rut em_rut
st_16 st_16
st_17 st_17
cbx_prdrot cbx_prdrot
cbx_calrot cbx_calrot
rb_4 rb_4
rb_5 rb_5
st_19 st_19
rb_fumig_mexico rb_fumig_mexico
mle_tratamiento mle_tratamiento
st_7 st_7
em_puerto em_puerto
st_20 st_20
em_nominspector em_nominspector
cbx_tratado cbx_tratado
mle_codsagtrat mle_codsagtrat
st_21 st_21
st_22 st_22
st_23 st_23
st_24 st_24
st_25 st_25
mle_condicion mle_condicion
mle_medida mle_medida
mle_producto mle_producto
mle_envase mle_envase
cbx_inspeccion cbx_inspeccion
cbx_fumigado cbx_fumigado
cbx_sag cbx_sag
dw_planilla dw_planilla
dw_3 dw_3
st_27 st_27
st_28 st_28
st_29 st_29
st_8 st_8
em_region em_region
em_provi em_provi
em_comuna em_comuna
cbx_5 cbx_5
st_30 st_30
dw_4 dw_4
st_18 st_18
st_9 st_9
st_32 st_32
em_csp em_csp
st_33 st_33
cbx_origen cbx_origen
cbx_oritrata cbx_oritrata
cbx_usda cbx_usda
cbx_usdainpe cbx_usdainpe
st_35 st_35
em_sps em_sps
st_36 st_36
em_tipoprodu em_tipoprodu
st_37 st_37
st_38 st_38
em_fecharegistro em_fecharegistro
em_fechaenvio em_fechaenvio
st_sellos st_sellos
em_sellos em_sellos
rb_anexo rb_anexo
uo_selplanta uo_selplanta
uo_selcliente uo_selcliente
cbx_recibidor cbx_recibidor
st_34 st_34
end type
global w_info_planilla_despacho w_info_planilla_despacho

type variables
str_busqueda 	istr_busq
str_mant 		istr_mant
Integer			ii_tipo , ii_var, ii_cli, ii_tiposa, ii_consol, ii_ptadest, il_tipodespacho
String				is_report, is_nombre, is_rut, is_tipopla, is_tratamiento, is_nomregion, is_nomprovi, is_comnombre

DataWindowChild	idwc_tipopro, idwc_cliente, idwc_planta, &
						idwc_pueremb, idwc_puertos, idwc_mercado, idwc_pueremb1
end variables

forward prototypes
public function boolean existeplanilla (long al_planilla)
public subroutine rellena_campos (integer inicio, integer termino, string ls_texto[], string campo)
public function boolean buscanombre (integer ai_cliente)
public function integer buscatipodespacho (integer cliente, integer planta, long planilla, string tipopla)
public function string rescata_contenedor (integer cliente, integer planta, long planilla, string tipopla)
public subroutine rescata_origen (integer cliente, integer planta, long planilla, string tipopla, integer prodrot)
public function integer planilla (integer li_cliente, integer li_planta, long li_planilla)
public function boolean valida_datos (integer ai_cliente, integer ai_planta, long ai_planilla)
public function string wf_codigoscsg (integer planta, integer cliente, long planilla, integer tipo)
public function string wf_codigoscsp (integer planta, integer cliente, long planilla, integer tipo)
end prototypes

public function boolean existeplanilla (long al_planilla);Integer	li_cansel, li_tecnic, li_tratamiento, li_selfec, li_selcen, li_codsag, li_inspector, li_exportador
String		ls_numsel, ls_ubisel, ls_tratam, ls_contraparte, ls_tratamiento, ls_embarque, ls_puerto, ls_ingredientenombre, ls_concennombre,&
			ls_destino, ls_tratcodsag, ls_nomtrat,ls_observacion, ls_sellos, ls_inspector,ls_ingrediente,ls_concentracion,&
			ls_duracion,ls_duranombre, ls_tempnombre
Date		ld_fecha, ld_fectrat
Long 		ll_numero, ll_fila, ll_fila1, ll_temperatura

dw_3.SetTransObject(sqlca)

If al_planilla <> 0 Then

	SELECT Max(defe_fecdes),Max(defe_numero),max(embq_codigo)
		INTO	:ld_fecha,:ll_numero,:ls_embarque
		FROM	dbo.DESPAFRIGOEN 
		WHERE	plde_codigo =	:uo_SelPlanta.Codigo
		AND	clie_codigo	=	:uo_SelCliente.Codigo
		AND	defe_plasag	=	:al_planilla
		AND   :is_tipopla in ('-1',defe_nturno);				
		
	If sqlca.SQLCode = -1 Then
		//F_ErrorBaseDatos(sqlca,"Lectura de la Tabla DESPAFRIGOEN")
		MessageBox("Atención", "Problema en Selección de Datos de Despacho.", Exclamation!, Ok!)
		em_planilla.SetFocus()
		Return False
	ElseIf sqlca.SQLCode = 100 Then
		MessageBox("Atención", "No existe Planilla S.A.G. Indicado.~r~rIngrese otro Número.", Exclamation!, Ok!)
		pb_acepta.Enabled	= False
		em_planilla.SetFocus()
		Return False
	Else
		SELECT  defe_inspec,isnull(defe_cansel,0), isnull(defe_numsel,''), isnull(defe_ubisel,''), 
			defe_tratam, defe_tecnic, trat_codigo, isnull(convert(date,defe_fecdes,19000101),''),tsag_numero,defe_glosag,
			defe_tiposa,isnull(defe_consol,0), isnull(defe_plades,0), isnull(inac_codigo,''),isnull(cons_codigo,''),
			isnull(dura_codigo,''),isnull(temp_codigo,0)
			INTO	:li_inspector,:li_cansel,  :ls_numsel,  :ls_ubisel,  
			:ls_tratam,  :li_tecnic, :li_tratamiento, :ld_fectrat, :ls_tratcodsag,:ls_observacion,
			:ii_tiposa, :ii_consol, :ii_ptadest,:ls_ingrediente,:ls_concentracion,:ls_duracion,:ll_temperatura
			FROM	dbo.DESPAFRIGOEN 
			WHERE	plde_codigo =	:uo_SelPlanta.Codigo
			AND	clie_codigo	=	:uo_SelCliente.Codigo
			AND	defe_plasag	=	:al_planilla
			AND   defe_nturno =  :is_tipopla
			AND   defe_fecdes =  :ld_fecha
			AND   defe_numero =  :ll_numero;	
			
		If sqlca.SQLCode = -1 Then
			//F_ErrorBaseDatos(sqlca,"Lectura de la Tabla DESPAFRIGOEN")
			MessageBox("Atención", "Problema en Selección de Detalle en Encabezado del Despacho.", Exclamation!, Ok!)	
		End If
		
		If valida_datos(uo_SelCliente.Codigo, uo_SelPlanta.Codigo,al_planilla) Then
			pb_acepta.Enabled = False
			Return False
		End If	
		
		SELECT RTrim(tecn_nombre)+' '+RTrim(tecn_apepat)+' '+RTrim(tecn_apemat)
		   INTO  :ls_contraparte
		   FROM dbo.cargostecnicos
			WHERE tecn_codigo = :li_tecnic
			AND   plde_codigo = :uo_SelPlanta.Codigo;
			
		If sqlca.SQLCode = -1 Then
			MessageBox("Atención", "Problema Para Tomar Datos del Contraparte.", Exclamation!, Ok!)	
		End If	
		
		SELECT tecn_nombre+' '+tecn_apepat+' '+tecn_apemat
		   INTO  :ls_inspector
		   FROM dbo.cargostecnicos
			WHERE tecn_codigo = :li_inspector
			AND   plde_codigo = :uo_SelPlanta.Codigo;
		
		SELECT tsag_nombre
			INTO :ls_tratamiento
			FROM dbo.sagtratamientoenca
			WHERE  tsag_numero = :ls_tratcodsag;
		
		SELECT Isnull(inac_nombre,'')
			INTO :ls_ingredientenombre
			FROM dbo.Sagingredienteactivo
			WHERE inac_codigo = :ls_ingrediente;
		
		SELECT isnull(cons_nombre,'')
			INTO :ls_concennombre
			FROM dbo.concentracion
			WHERE cons_codigo = :ls_concentracion;
		
		SELECT isnull(dura_duraci,'')
			INTO :ls_duranombre
			FROM dbo.duracion
			WHERE dura_codigo = :ls_duracion;
		
		SELECT isnull(temp_descri,'')
			INTO :ls_tempnombre
			FROM dbo.temperatura
			WHERE temp_codigo = :ll_temperatura;
		
		ll_fila = dw_3.Retrieve(uo_SelPlanta.Codigo,al_planilla)
		
		If ll_fila > 0 Then
			FOR ll_fila1 = 1 TO dw_3.RowCount()
				ls_numsel = ls_numsel+''+dw_3.Object.sell_numero[ll_fila1]+'-'
				ls_ubisel = ls_ubisel+''+dw_3.Object.sell_nombre[ll_fila1]+'-'
				ls_sellos = ls_sellos+''+dw_3.Object.sell_numero[ll_fila1]+'-'+''+dw_3.Object.sell_nombre[ll_fila1]+'-'
			NEXT
		End If
		
		em_sellos.Text = ls_sellos
		
		em_cansellos.Text = String(ll_fila)
		
		ls_numsel = Mid(ls_numsel, 1,len(ls_numsel) -1 )
		ls_ubisel = Mid(ls_ubisel, 1,len(ls_ubisel) -1 )
				
		SELECT plde_codsag
		INTO :li_codsag
		FROM	dbo.plantadesp
		WHERE plde_codigo =:uo_SelPlanta.Codigo;
		
		SELECT pue.puer_nombre,des.dest_nombre,emb.expo_codigo
		INTO	:ls_puerto,:ls_destino, :li_exportador
		FROM dbo.embarqueprod as emb,dbo.destinos as des, dbo.puertos as pue
		WHERE clie_codigo = :uo_SelCliente.Codigo
		AND	embq_codigo = :ls_embarque
		AND	emb.dest_codigo = des.dest_codigo
		AND	emb.puer_codigo = pue.puer_codigo;
		
		If sqlca.SQLCode = -1 Then
			//F_ErrorBaseDatos(sqlca,"Lectura de la Tabla DESPAFRIGOEN")
			MessageBox("Atención", "Problema en Selección de Datos del Embarque.", Exclamation!, Ok!)	
		End If
		
		If BuscaNombre(li_exportador) Then
			em_exportador.Text = is_nombre
			em_rut.Text = is_rut
		End If	
		
		em_fecha_des.text			= 	String(ld_fecha)
		pb_acepta.Enabled			= 	True
		
		em_numsellos.Text			=	ls_numsel
		em_ubisellos.Text				=	ls_ubisel
		em_nomdespachador.Text	=	ls_contraparte
		em_nominspector.Text		= 	ls_inspector
		mle_codsagtrat.Text			=	ls_tratcodsag
		em_puerto.Text				=	ls_puerto+' / '+ls_destino
		em_CSP.Text 					=  'CSP  '+String(li_codsag)
		
		If ii_tiposa = 11 Then
			cbx_recibidor.visible	=	True
		Else
			cbx_recibidor.visible	=	False
		End If
		
//		If li_selfec = 1 Then 
//			ls_tratamiento =	ls_tratamiento+ ' FECHA '+ string(ld_fectrat)  
//		End If	
//		
//		If li_selcen = 1 Then 
//			ls_tratamiento =	ls_tratamiento+ ' CENTRO DE FUMIGACIÓN '+ string(li_codsag)  
//		End If
		
		If ls_tratamiento <> '' Then mle_tratamiento.Text = ls_tratamiento		
		If ls_ingredientenombre <> '' Then mle_tratamiento.Text = mle_tratamiento.Text+', '+ls_ingredientenombre
		If ls_concennombre <> '' Then mle_tratamiento.Text = mle_tratamiento.Text+', '+ls_concennombre
		If String(ld_fectrat,'dd/mm/yyyy') <> '01/01/1900' Then mle_tratamiento.Text = mle_tratamiento.Text+', '+String(ld_fectrat,'dd/mm/yyyy')		
		If ls_duranombre <> '' Then mle_tratamiento.Text = mle_tratamiento.Text+', '+ls_duranombre
		If ls_tempnombre <> '' Then mle_tratamiento.Text = mle_tratamiento.Text+', '+ls_tempnombre
		If rb_fumig_usa.Checked Then mle_tratamiento.Text = ls_observacion		
		If ls_tratamiento <> '' Then is_tratamiento =	ls_tratamiento+ ' FECHA '+ string(ld_fectrat) 
			
		Return True
	End If
Else
	MessageBox("Atención", "Faltan parámetros de búsqueda.~r~rIngreselos todos.", Exclamation!, Ok!)
	Return False
End If
end function

public subroutine rellena_campos (integer inicio, integer termino, string ls_texto[], string campo);/*=======================================================================
Escribe en la planilla dentro de las lineas de "Observaciones" Las Provincias
y las Comunas en forma Lineal
========================================================================*/
integer li_int1;
string ls_data;

For li_int1 = inicio to termino
	
	 ls_data= ls_data +" "+ls_texto[li_int1];
		
next	

vinf.dw_1.Modify(campo + ls_data + "'")
end subroutine

public function boolean buscanombre (integer ai_cliente);Integer	li_codexp, li_planta

SELECT expo_nombre,expo_rutexp
	INTO	:is_nombre,:is_rut
	FROM	dbo.exportadores
	WHERE	expo_codigo	=	:ai_cliente;
				
	IF sqlca.SQLCode = -1 THEN
		F_ErrorBaseDatos(sqlca,"Lectura de la Tabla exportadores")
	Return False
	
	ELSEIF sqlca.SQLCode = 100 THEN
		IF ii_tiposa = 7 AND ii_tiposa = 8 AND ii_tiposa = 9 THEN
			MessageBox("Atención", "No Existe Exportador.~r~rIngrese otro Número.", &
							Exclamation!, Ok!)
			Return False	
		END IF	
	END IF
	Return True
end function

public function integer buscatipodespacho (integer cliente, integer planta, long planilla, string tipopla);Integer	li_codexp, li_planta, li_tipo = 0
Date		ld_fecha

IF planilla <> 0 THEN

	SELECT max(defe_tiposa)
		INTO	:li_tipo
		FROM	dbo.DESPAFRIGOEN 
		WHERE	plde_codigo =	:planta
		AND	clie_codigo	=	:cliente
		AND	defe_plasag	=	:planilla
		AND   defe_nturno	=	:tipopla;
				
	IF sqlca.SQLCode = -1 THEN
		F_ErrorBaseDatos(sqlca,"Lectura de la Tabla DESPAFRIGOEN")
		li_tipo = 0
		RETURN li_tipo
	ELSEIF sqlca.SQLCode = 100 THEN
		li_tipo = 0
		RETURN li_tipo
	ELSE
		RETURN li_tipo
	END IF
ELSE
	RETURN li_tipo
END IF
end function

public function string rescata_contenedor (integer cliente, integer planta, long planilla, string tipopla);String Contenedor;

SELECT defe_nrcont INTO :Contenedor FROM dbo.despafrigoen WHERE
	clie_codigo=:cliente AND 
	plde_codigo=:planta AND
	defe_plasag=:planilla  AND
	defe_nturno=:tipopla
GROUP BY defe_nrcont;

IF sqlca.SQLCode = -1 THEN
	F_errorbasedatos(sqlca,"Lectura tabla despafrigoen")
	
END IF

RETURN Contenedor;
end function

public subroutine rescata_origen (integer cliente, integer planta, long planilla, string tipopla, integer prodrot);/*=======================================================
Se instancia un datastore para traer registros de la
dw_info_planilla_despacho_prov_comuna y rescatar el origen
========================================================*/
integer li_int1, li_filas, li_cont;
string ls_texto[99], ls_data,ls_data2,ls_contenedor;

datastore data_1;
data_1 = CREATE datastore;
data_1.dataobject="dw_info_planilla_despacho_prov_comuna"
data_1.settransobject(sqlca);

li_filas=data_1.retrieve(cliente,planta,planilla,tipopla,Prodrot);

li_cont=1;
ls_data=data_1.object.prod_provin[li_cont]	
ls_texto[li_cont]="Provincia(s):"+ls_data
//ls_texto[li_cont]=ls_data
li_cont=li_cont + 1;

/*==================================================
Recorre la Datastore data_1 para rescatar provincias
==================================================*/
FOR li_int1 = 2 to li_filas
	 ls_data=data_1.object.prod_provin[li_int1]	
	 ls_data2=data_1.object.prod_provin[li_int1 -1]
	 
	IF trim(ls_data) <> trim(ls_data2) then
		ls_texto[li_cont]=ls_data
		li_cont=li_cont+1;
	end if	
	
next

/*=================================================
Recorre la Datastore data_1 para rescatar comunas
==================================================*/
ls_texto[li_cont]="/Comuna(s):"
li_cont=li_cont+1;

ls_data=""
FOR li_int1 = 1 to li_filas
	 ls_data=data_1.object.prod_comuna[li_int1]	
	 ls_texto[li_cont]=ls_data 
	 li_cont=li_cont+1;
next

/*=======================================
Agrega en informe el numero de contenedor 
solo para informe de productos agrícolas
=======================================*/
IF Not cbx_usdainpe.Checked AND  Not cbx_origen.Checked	 AND  NOt cbx_usda.Checked AND  Not cbx_oritrata.Checked THEN
	IF Not rb_fumig_mexico.Checked THEN 
		ls_contenedor=rescata_contenedor(cliente,planta,planilla,is_tipopla);
		IF NOT ISNULL(ls_contenedor) THEN
			ls_texto[li_cont]="/Contenedor:" 
			li_cont=li_cont+1
			ls_texto[li_cont]=ls_contenedor; 
			li_cont=li_cont+1 
		END IF
	END IF	
END IF	

/*=================================================
Rellena los objectos de texto de la planilla con los
datos de Origen almacenados en ls_texto[li_int1]
==================================================*/
IF rb_fumig_usa.Checked THEN
	rellena_campos(1,5,ls_texto,"t_campo1.text = '")
	rellena_campos(6,10,ls_texto,"t_campo2.text = '")
	rellena_campos(11,li_cont,ls_texto,"t_campo3.text = '")
ELSE
	rellena_campos(1,3,ls_texto,"t_campo1.text = '")
	rellena_campos(4,8,ls_texto,"t_campo2.text = '")
	rellena_campos(9,14,ls_texto,"t_campo3.text = '")
	rellena_campos(15,li_cont,ls_texto,"t_campo4.text = '")
END IF
end subroutine

public function integer planilla (integer li_cliente, integer li_planta, long li_planilla);Long ll_numero
Integer li_contador, ll_fila
Datetime    ldt_hora

ldt_hora			=	Datetime(Date(Today()),Time(Today())	)

dw_planilla.SetTransObject(SQLCA)

ll_fila = dw_planilla.Retrieve(li_cliente,li_planta,li_planilla)

IF ll_fila > 0 THEN
	FOR ll_fila = 1 TO dw_planilla.RowCount()
		
		ll_numero = dw_planilla.Object.defe_numero[ll_fila]
			
		UPDATE dbo.CONTROLDESPACHOS SET 
		CODE_EMIPLA = 1,
		CODE_FECPLA = :ldt_hora,
		CODE_PLASAG = :li_planilla
		WHERE  plde_codigo =	:li_planta
		AND	 clie_codigo =	:li_cliente
		AND	 defe_numero =	:ll_numero;
		COMMIT;
		
	NEXT
END IF

Return 0



end function

public function boolean valida_datos (integer ai_cliente, integer ai_planta, long ai_planilla);Long ll_fila, ll_cont, ll_pallet, ll_fila1, ll_prodrotulado, ll_prediorot, ll_cuartelrot
String	ls_mensaje

ls_mensaje = ''

ll_fila1 = dw_4.Retrieve(ai_cliente,ai_planta,ai_planilla)

IF ll_fila1 > 0 THEN
	FOR ll_fila = 1 TO dw_4.RowCount()
				
		ll_pallet 			= dw_4.Object.paen_numero[ll_fila]		
		ll_prodrotulado 	= dw_4.Object.pafr_prdrot[ll_fila]
		ll_prediorot 		= dw_4.Object.pafr_huert4[ll_fila]
		ll_cuartelrot 		= dw_4.Object.pafr_cuart4[ll_fila]
			
		ls_mensaje = ls_mensaje +'~rPallet '+string(ll_pallet)+' con Datos Erroneos de Productor Rotulado '+String(ll_prodrotulado)+ ' Predio ' + String(ll_prediorot)+ ' Cuartel '+String(ll_cuartelrot)+','
	
	NEXT

	IF ls_mensaje <> '' THEN
		MessageBox("Datos Rotulados con Errores",String(ls_mensaje)+"~r~rArregle por Movimientos -> Mantención -> Mantención Predio Cuartel Detalle Pallet.", &
							Exclamation!, Ok!)
		pb_acepta.Enabled = False							
		Return True
	END IF
END IF
pb_acepta.Enabled = True
Return False

	


end function

public function string wf_codigoscsg (integer planta, integer cliente, long planilla, integer tipo);String	ls_Retorno , ls_Union = ' - '
Long	ll_Fila

DataStore ds_Codigos

ds_Codigos = Create DataStore

ds_Codigos.DataObject = "dw_gene_codigoscsg"
ds_Codigos.SetTransObject(Sqlca)

If ds_Codigos.Retrieve(Planta, Cliente, Planilla, Tipo) = 0 Then
	MessageBox("Error", "No se encontro informacion para la planilla.", Information!, OK!)
	ls_Retorno = ''
Else
	For ll_Fila = 1 To ds_Codigos.RowCount()
		If ll_Fila = ds_Codigos.RowCount() Then
			ls_Retorno += ds_Codigos.Object.prpr_prepro[ll_Fila]
		Else
			ls_Retorno += ds_Codigos.Object.prpr_prepro[ll_Fila] + ls_Union
		End If		
	Next	
End If

Destroy ds_Codigos

Return ls_Retorno
end function

public function string wf_codigoscsp (integer planta, integer cliente, long planilla, integer tipo);String	ls_Retorno , ls_Union = ' - '
Long	ll_Fila

DataStore ds_Codigos

ds_Codigos = Create DataStore

ds_Codigos.DataObject = "dw_gene_codigoscsp"
ds_Codigos.SetTransObject(Sqlca)

If ds_Codigos.Retrieve(Planta, Cliente, Planilla, Tipo) = 0 Then
	MessageBox("Error", "No se encontro informacion para la planilla.", Information!, OK!)
	ls_Retorno = ''
Else
	For ll_Fila = 1 To ds_Codigos.RowCount()
		If ll_Fila = ds_Codigos.RowCount() Then
			ls_Retorno += ds_Codigos.Object.plde_chasag[ll_Fila]
		Else
			ls_Retorno += ds_Codigos.Object.plde_chasag[ll_Fila] + ls_Union
		End If		
	Next	
End If

Destroy ds_Codigos

Return ls_Retorno
end function

on w_info_planilla_despacho.create
int iCurrent
call super::create
this.st_4=create st_4
this.st_1=create st_1
this.st_6=create st_6
this.em_fecha=create em_fecha
this.st_3=create st_3
this.st_2=create st_2
this.em_planilla=create em_planilla
this.em_fecha_des=create em_fecha_des
this.gb_3=create gb_3
this.st_5=create st_5
this.rb_prod_agri=create rb_prod_agri
this.rb_fumig_usa=create rb_fumig_usa
this.rb_fumig=create rb_fumig
this.rb_usda=create rb_usda
this.cbx_varirot=create cbx_varirot
this.cbx_1=create cbx_1
this.st_10=create st_10
this.st_11=create st_11
this.st_12=create st_12
this.st_13=create st_13
this.em_cansellos=create em_cansellos
this.em_ubisellos=create em_ubisellos
this.em_numsellos=create em_numsellos
this.em_nomdespachador=create em_nomdespachador
this.st_14=create st_14
this.em_nrodespacho=create em_nrodespacho
this.st_15=create st_15
this.em_exportador=create em_exportador
this.em_rut=create em_rut
this.st_16=create st_16
this.st_17=create st_17
this.cbx_prdrot=create cbx_prdrot
this.cbx_calrot=create cbx_calrot
this.rb_4=create rb_4
this.rb_5=create rb_5
this.st_19=create st_19
this.rb_fumig_mexico=create rb_fumig_mexico
this.mle_tratamiento=create mle_tratamiento
this.st_7=create st_7
this.em_puerto=create em_puerto
this.st_20=create st_20
this.em_nominspector=create em_nominspector
this.cbx_tratado=create cbx_tratado
this.mle_codsagtrat=create mle_codsagtrat
this.st_21=create st_21
this.st_22=create st_22
this.st_23=create st_23
this.st_24=create st_24
this.st_25=create st_25
this.mle_condicion=create mle_condicion
this.mle_medida=create mle_medida
this.mle_producto=create mle_producto
this.mle_envase=create mle_envase
this.cbx_inspeccion=create cbx_inspeccion
this.cbx_fumigado=create cbx_fumigado
this.cbx_sag=create cbx_sag
this.dw_planilla=create dw_planilla
this.dw_3=create dw_3
this.st_27=create st_27
this.st_28=create st_28
this.st_29=create st_29
this.st_8=create st_8
this.em_region=create em_region
this.em_provi=create em_provi
this.em_comuna=create em_comuna
this.cbx_5=create cbx_5
this.st_30=create st_30
this.dw_4=create dw_4
this.st_18=create st_18
this.st_9=create st_9
this.st_32=create st_32
this.em_csp=create em_csp
this.st_33=create st_33
this.cbx_origen=create cbx_origen
this.cbx_oritrata=create cbx_oritrata
this.cbx_usda=create cbx_usda
this.cbx_usdainpe=create cbx_usdainpe
this.st_35=create st_35
this.em_sps=create em_sps
this.st_36=create st_36
this.em_tipoprodu=create em_tipoprodu
this.st_37=create st_37
this.st_38=create st_38
this.em_fecharegistro=create em_fecharegistro
this.em_fechaenvio=create em_fechaenvio
this.st_sellos=create st_sellos
this.em_sellos=create em_sellos
this.rb_anexo=create rb_anexo
this.uo_selplanta=create uo_selplanta
this.uo_selcliente=create uo_selcliente
this.cbx_recibidor=create cbx_recibidor
this.st_34=create st_34
iCurrent=UpperBound(this.Control)
this.Control[iCurrent+1]=this.st_4
this.Control[iCurrent+2]=this.st_1
this.Control[iCurrent+3]=this.st_6
this.Control[iCurrent+4]=this.em_fecha
this.Control[iCurrent+5]=this.st_3
this.Control[iCurrent+6]=this.st_2
this.Control[iCurrent+7]=this.em_planilla
this.Control[iCurrent+8]=this.em_fecha_des
this.Control[iCurrent+9]=this.gb_3
this.Control[iCurrent+10]=this.st_5
this.Control[iCurrent+11]=this.rb_prod_agri
this.Control[iCurrent+12]=this.rb_fumig_usa
this.Control[iCurrent+13]=this.rb_fumig
this.Control[iCurrent+14]=this.rb_usda
this.Control[iCurrent+15]=this.cbx_varirot
this.Control[iCurrent+16]=this.cbx_1
this.Control[iCurrent+17]=this.st_10
this.Control[iCurrent+18]=this.st_11
this.Control[iCurrent+19]=this.st_12
this.Control[iCurrent+20]=this.st_13
this.Control[iCurrent+21]=this.em_cansellos
this.Control[iCurrent+22]=this.em_ubisellos
this.Control[iCurrent+23]=this.em_numsellos
this.Control[iCurrent+24]=this.em_nomdespachador
this.Control[iCurrent+25]=this.st_14
this.Control[iCurrent+26]=this.em_nrodespacho
this.Control[iCurrent+27]=this.st_15
this.Control[iCurrent+28]=this.em_exportador
this.Control[iCurrent+29]=this.em_rut
this.Control[iCurrent+30]=this.st_16
this.Control[iCurrent+31]=this.st_17
this.Control[iCurrent+32]=this.cbx_prdrot
this.Control[iCurrent+33]=this.cbx_calrot
this.Control[iCurrent+34]=this.rb_4
this.Control[iCurrent+35]=this.rb_5
this.Control[iCurrent+36]=this.st_19
this.Control[iCurrent+37]=this.rb_fumig_mexico
this.Control[iCurrent+38]=this.mle_tratamiento
this.Control[iCurrent+39]=this.st_7
this.Control[iCurrent+40]=this.em_puerto
this.Control[iCurrent+41]=this.st_20
this.Control[iCurrent+42]=this.em_nominspector
this.Control[iCurrent+43]=this.cbx_tratado
this.Control[iCurrent+44]=this.mle_codsagtrat
this.Control[iCurrent+45]=this.st_21
this.Control[iCurrent+46]=this.st_22
this.Control[iCurrent+47]=this.st_23
this.Control[iCurrent+48]=this.st_24
this.Control[iCurrent+49]=this.st_25
this.Control[iCurrent+50]=this.mle_condicion
this.Control[iCurrent+51]=this.mle_medida
this.Control[iCurrent+52]=this.mle_producto
this.Control[iCurrent+53]=this.mle_envase
this.Control[iCurrent+54]=this.cbx_inspeccion
this.Control[iCurrent+55]=this.cbx_fumigado
this.Control[iCurrent+56]=this.cbx_sag
this.Control[iCurrent+57]=this.dw_planilla
this.Control[iCurrent+58]=this.dw_3
this.Control[iCurrent+59]=this.st_27
this.Control[iCurrent+60]=this.st_28
this.Control[iCurrent+61]=this.st_29
this.Control[iCurrent+62]=this.st_8
this.Control[iCurrent+63]=this.em_region
this.Control[iCurrent+64]=this.em_provi
this.Control[iCurrent+65]=this.em_comuna
this.Control[iCurrent+66]=this.cbx_5
this.Control[iCurrent+67]=this.st_30
this.Control[iCurrent+68]=this.dw_4
this.Control[iCurrent+69]=this.st_18
this.Control[iCurrent+70]=this.st_9
this.Control[iCurrent+71]=this.st_32
this.Control[iCurrent+72]=this.em_csp
this.Control[iCurrent+73]=this.st_33
this.Control[iCurrent+74]=this.cbx_origen
this.Control[iCurrent+75]=this.cbx_oritrata
this.Control[iCurrent+76]=this.cbx_usda
this.Control[iCurrent+77]=this.cbx_usdainpe
this.Control[iCurrent+78]=this.st_35
this.Control[iCurrent+79]=this.em_sps
this.Control[iCurrent+80]=this.st_36
this.Control[iCurrent+81]=this.em_tipoprodu
this.Control[iCurrent+82]=this.st_37
this.Control[iCurrent+83]=this.st_38
this.Control[iCurrent+84]=this.em_fecharegistro
this.Control[iCurrent+85]=this.em_fechaenvio
this.Control[iCurrent+86]=this.st_sellos
this.Control[iCurrent+87]=this.em_sellos
this.Control[iCurrent+88]=this.rb_anexo
this.Control[iCurrent+89]=this.uo_selplanta
this.Control[iCurrent+90]=this.uo_selcliente
this.Control[iCurrent+91]=this.cbx_recibidor
this.Control[iCurrent+92]=this.st_34
end on

on w_info_planilla_despacho.destroy
call super::destroy
destroy(this.st_4)
destroy(this.st_1)
destroy(this.st_6)
destroy(this.em_fecha)
destroy(this.st_3)
destroy(this.st_2)
destroy(this.em_planilla)
destroy(this.em_fecha_des)
destroy(this.gb_3)
destroy(this.st_5)
destroy(this.rb_prod_agri)
destroy(this.rb_fumig_usa)
destroy(this.rb_fumig)
destroy(this.rb_usda)
destroy(this.cbx_varirot)
destroy(this.cbx_1)
destroy(this.st_10)
destroy(this.st_11)
destroy(this.st_12)
destroy(this.st_13)
destroy(this.em_cansellos)
destroy(this.em_ubisellos)
destroy(this.em_numsellos)
destroy(this.em_nomdespachador)
destroy(this.st_14)
destroy(this.em_nrodespacho)
destroy(this.st_15)
destroy(this.em_exportador)
destroy(this.em_rut)
destroy(this.st_16)
destroy(this.st_17)
destroy(this.cbx_prdrot)
destroy(this.cbx_calrot)
destroy(this.rb_4)
destroy(this.rb_5)
destroy(this.st_19)
destroy(this.rb_fumig_mexico)
destroy(this.mle_tratamiento)
destroy(this.st_7)
destroy(this.em_puerto)
destroy(this.st_20)
destroy(this.em_nominspector)
destroy(this.cbx_tratado)
destroy(this.mle_codsagtrat)
destroy(this.st_21)
destroy(this.st_22)
destroy(this.st_23)
destroy(this.st_24)
destroy(this.st_25)
destroy(this.mle_condicion)
destroy(this.mle_medida)
destroy(this.mle_producto)
destroy(this.mle_envase)
destroy(this.cbx_inspeccion)
destroy(this.cbx_fumigado)
destroy(this.cbx_sag)
destroy(this.dw_planilla)
destroy(this.dw_3)
destroy(this.st_27)
destroy(this.st_28)
destroy(this.st_29)
destroy(this.st_8)
destroy(this.em_region)
destroy(this.em_provi)
destroy(this.em_comuna)
destroy(this.cbx_5)
destroy(this.st_30)
destroy(this.dw_4)
destroy(this.st_18)
destroy(this.st_9)
destroy(this.st_32)
destroy(this.em_csp)
destroy(this.st_33)
destroy(this.cbx_origen)
destroy(this.cbx_oritrata)
destroy(this.cbx_usda)
destroy(this.cbx_usdainpe)
destroy(this.st_35)
destroy(this.em_sps)
destroy(this.st_36)
destroy(this.em_tipoprodu)
destroy(this.st_37)
destroy(this.st_38)
destroy(this.em_fecharegistro)
destroy(this.em_fechaenvio)
destroy(this.st_sellos)
destroy(this.em_sellos)
destroy(this.rb_anexo)
destroy(this.uo_selplanta)
destroy(this.uo_selcliente)
destroy(this.cbx_recibidor)
destroy(this.st_34)
end on

event open;call super::open;Boolean lb_Cerrar = False

If IsNull(uo_SelPlanta.Codigo) Then lb_Cerrar = True
If IsNull(uo_SelCliente.Codigo) Then lb_Cerrar = True

If lb_Cerrar Then
	Close(This)
Else	
	IF gi_vari_rotulada = 1 THEN
		cbx_varirot.Checked	= True
		cbx_varirot.Enabled	= False
	ELSE
		cbx_varirot.Checked	= False
		cbx_varirot.Enabled	= True
	END IF	
	
	IF gi_prod_rotulado = 1 THEN
		cbx_prdrot.Checked	= True
		cbx_prdrot.Enabled	= False
	ELSE
		cbx_prdrot.Checked	= False
		cbx_prdrot.Enabled	= True
	END IF	
	
	IF gi_cali_rotulado = 1 THEN
		cbx_calrot.Checked	= True
		cbx_calrot.Enabled		= False
	ELSE
		cbx_calrot.Checked	= False
		cbx_calrot.Enabled		= True
	END IF	
	
	ii_var	= gi_vari_rotulada
	
	is_tipopla	=	'1'	
	
	uo_SelCliente.Seleccion(False, False)
	uo_SelCliente.Inicia(gi_codexport)
	
	uo_SelPlanta.Seleccion(False, False)
	uo_SelPlanta.Filtra(1)
	uo_SelPlanta.Inicia(gi_codplanta)
	
	em_region.Text 	= String(uo_SelPlanta.Region)
	em_provi.Text		= String(uo_SelPlanta.ProvinciaSAG)
	em_comuna.Text	= String(uo_SelPlanta.ComunaSAG)
	
	rb_prod_agri.Checked	=	True
	
	em_fecha.text				=	String(Today())
	em_fecharegistro.Text	=	String(f_fechahora())
	em_fechaenvio.Text		=	String(f_fechahora())
	
	dw_4.SetTransObject(SQLCA)	
End If
end event

event resize;//
end event

type pb_excel from w_para_informes`pb_excel within w_info_planilla_despacho
integer x = 4480
integer y = 764
end type

type st_computador from w_para_informes`st_computador within w_info_planilla_despacho
boolean visible = false
end type

type st_usuario from w_para_informes`st_usuario within w_info_planilla_despacho
boolean visible = false
end type

type st_temporada from w_para_informes`st_temporada within w_info_planilla_despacho
boolean visible = false
end type

type p_logo from w_para_informes`p_logo within w_info_planilla_despacho
end type

type st_titulo from w_para_informes`st_titulo within w_info_planilla_despacho
integer x = 27
integer y = 244
integer width = 4352
string text = "Planilla de Despacho Fruta S.A.G."
end type

type pb_acepta from w_para_informes`pb_acepta within w_info_planilla_despacho
string tag = "Imprimir Reporte"
integer x = 4512
integer y = 1172
integer taborder = 280
integer weight = 400
fontcharset fontcharset = ansi!
end type

event pb_acepta::clicked;SetPointer(Arrow!)

Integer	li_fila, li_TipoDespacho, li_prdrot, li_calrot, li_visualiza
Long		ll_planilla_sag, ll_cuenta
String		ls_glosa, ls_puerto, ls_bulto, ls_medida, ls_envase, ls_condicion, ls_producto,ls_visureci, ls_tipoprodu

istr_info.titulo	= 'PLANILLA DE DESPACHO FRUTA SAG'

ll_planilla_sag	=	Long(em_planilla.Text)
ls_tipoprodu		=	String(em_tipoprodu.Text)
ls_Puerto			=	em_puerto.text
li_TipoDespacho=BuscaTipoDespacho(uo_SelCliente.Codigo, uo_SelPlanta.Codigo,ll_Planilla_sag,is_tipopla)

If li_TipoDespacho = 7 AND ii_consol = 1 AND ii_ptadest>0 Then li_TipoDespacho = 11

OpenWithParm(vinf,istr_info)

vinf.dw_1.DataObject = "dw_info_planilla_despacho_sag_nuevo"

vinf.dw_1.GetChild('embq_ptoori', idwc_pueremb)
idwc_pueremb.SetTransObject(SQLCA)
idwc_pueremb.Retrieve(0)

vinf.dw_1.GetChild('embq_ptoori_1', idwc_pueremb1)
idwc_pueremb1.SetTransObject(SQLCA)
idwc_pueremb1.Retrieve(-1)

vinf.dw_1.GetChild('puer_codigo', idwc_puertos)
idwc_puertos.SetTransObject(SQLCA)
idwc_puertos.Retrieve(-1)

vinf.dw_1.GetChild('dest_codigo', idwc_mercado)
idwc_mercado.SetTransObject(SQLCA)
idwc_mercado.Retrieve(-1)

If cbx_prdrot.Checked Then
	li_prdrot 	=	1
Else
	li_prdrot	=	0
End If

If cbx_calrot.Checked Then
	li_calrot 	=	1
Else
	li_calrot	=	0
End If

If cbx_sag.Checked Then
	li_visualiza = 1
Else
	li_visualiza = 0
End If	

If cbx_recibidor.Checked Then
	ls_visureci='1'
Else
   ls_visureci='2'
End If

ls_condicion	= String(mle_condicion.Text)
//ls_producto	= String(mle_producto.Text)
ls_medida	= String(mle_medida.Text)
ls_envase	= String(mle_envase.Text)

vinf.dw_1.SetTransObject(SQLCA)

li_fila			=	vinf.dw_1.Retrieve(uo_SelCliente.Codigo, uo_SelPlanta.Codigo,ll_planilla_sag, ii_var, ii_cli,li_prdrot,li_calrot,&
								is_tipopla,ls_condicion,ls_producto,ls_medida,ls_envase,li_visualiza,ls_tipoprodu)

vinf.dw_1.SetRedraw(False)

If li_fila = -1 Then
	MessageBox( "Error en Base de Datos", "Se ha producido un error en Base de datos : ~n" + sqlca.SQLErrText, StopSign!, Ok!)
ElseIf li_fila = 0 Then
	MessageBox( "No Existe información", "No existe información para este informe.", StopSign!, Ok!)
Else
	F_Membrete(vinf.dw_1)
	
	If Not rb_fumig_usa.Checked Or Not rb_fumig_mexico.Checked Then ls_glosa = vinf.dw_1.Object.defe_glosag[1]
	
	If IsNull(ls_glosa) Then ls_glosa = ''
	ls_glosa += 	' CSG / ' + wf_CodigosCSG(uo_SelPlanta.Codigo, uo_SelCliente.Codigo, ll_Planilla_Sag, Integer(is_TipoPla))
	ls_glosa += 	' CSP / ' + wf_CodigosCSP(uo_SelPlanta.Codigo, uo_SelCliente.Codigo, ll_Planilla_Sag, Integer(is_TipoPla))
	
	vinf.dw_1.SetItem(vinf.dw_1.RowCount(), "defe_glosag", ls_glosa)
	vinf.dw_1.Modify("t_tipoproduccion.Text = '" + em_tipoprodu.Text + "'")
	
	FOR li_fila	= li_fila + 1 TO 12
		vinf.dw_1.InsertRow(li_fila)
		vinf.dw_1.SetItem(li_fila, "cant_pallet", vinf.dw_1.GetItemNumber(vinf.dw_1.GetRow(),"cant_pallet"))
		vinf.dw_1.SetItem(li_fila, "embc_ageadu", vinf.dw_1.GetItemString(vinf.dw_1.GetRow(),"embc_ageadu"))
		vinf.dw_1.SetItem(li_fila, "embc_nrorut", vinf.dw_1.GetItemString(vinf.dw_1.GetRow(),"embc_nrorut"))
		vinf.dw_1.SetItem(li_fila, "clie_rnombr", vinf.dw_1.GetItemString(vinf.dw_1.GetRow(),"clie_rnombr"))
		vinf.dw_1.SetItem(li_fila, "clie_nrorut", vinf.dw_1.GetItemString(vinf.dw_1.GetRow(),"clie_nrorut"))
		vinf.dw_1.SetItem(li_fila, "embq_nomnav", vinf.dw_1.GetItemString(vinf.dw_1.GetRow(),"embq_nomnav"))
		vinf.dw_1.SetItem(li_fila, "embc_nombre", vinf.dw_1.GetItemString(vinf.dw_1.GetRow(),"embc_nombre"))			
	Next
	
	If gs_Ambiente <> 'Windows' Then F_ImprimeInformePdf(vinf.dw_1, istr_info.titulo)
		
	vinf.dw_1.Modify("t_csp.text = '" + em_csp.text + "'")
	vinf.dw_1.Modify("t_nrodespacho.text = '" + em_nrodespacho.text + "'")
	vinf.dw_1.Modify("t_cansellos.text = '" + em_cansellos.text + "'")
	vinf.dw_1.Modify("t_ubisellos.text = '" + em_ubisellos.text + "'")
	vinf.dw_1.Modify("t_numsellos.text = '" + em_numsellos.text + "'")
	vinf.dw_1.Modify("t_nomdespachador.text = '" + em_nomdespachador.text + "'")
	vinf.dw_1.Modify("t_nominspector.text = '" + em_nominspector.text + "'")	
//	vinf.dw_1.Modify("t_tratamiento.text = '" + mle_tratamiento.text + "'")
	vinf.dw_1.Modify("t_nombreexportador.text = '" + em_exportador.text + "'")
	vinf.dw_1.Modify("t_rutexportador.text = '" + em_rut.text + "'")
	vinf.dw_1.Modify("t_defe_fecdes.text = '" + em_fecha_des.text + "'")
	vinf.dw_1.Modify("t_puerto.text = '" + em_puerto.text + "'")
	vinf.dw_1.Modify("t_prefijo.text = '" + uo_SelPlanta.CodigoCSP + "'")
	vinf.dw_1.Modify("t_codsagtrat.text = '" + mle_codsagtrat.Text + "'")	
	vinf.dw_1.Modify("t_kilos.text = '" + mle_medida.Text + "'")
	vinf.dw_1.Modify("t_cajas.text = '" + mle_envase.Text + "'")
	vinf.dw_1.Modify("t_region.text = '" + em_region.Text + "'")
	vinf.dw_1.Modify("t_provi.text = '" + em_provi.Text + "'")
	vinf.dw_1.Modify("t_comuna.text = '" + em_comuna.Text + "'")
	vinf.dw_1.Modify("t_fecharegistro.Text = '" + em_fecharegistro.text + "'")
	vinf.dw_1.Modify("t_fechaenvio.Text = '" + em_fechaenvio.text + "'")
	vinf.dw_1.Modify("t_sps.Text = '" + em_sps.text + "'")
	vinf.dw_1.Modify("t_sps.Text = '" 	+ em_tipoprodu.text + "'")
	
	If cbx_usdainpe.Checked Then
		vinf.dw_1.Modify("t_versag.Text = '" + 'REQUIERE VERIfICACION SAG' + "'")
		vinf.dw_1.Modify("t_codsagtrat.Text = '" + 'INSPECCION SAG/USDA' + "'")
	End If
	
	If cbx_origen.Checked Then vinf.dw_1.Modify("t_codsagtrat.Text = '" + 'INSPECCION SAG/ORIGEN' + "'")
	If cbx_usda.Checked Then vinf.dw_1.Modify("t_codsagtrat.Text = '" + 'TRATADO USDA' + "'")
	If cbx_oritrata.Checked Then vinf.dw_1.Modify("t_codsagtrat.Text = '" + 'TRATADO ORIGEN' + "'")
	
	Planilla(uo_SelCliente.Codigo, uo_SelPlanta.Codigo,ll_planilla_sag)

	If cbx_Inspeccion.Checked Then vinf.dw_1.Modify("x1.Text = '" + 'X' + "'")
	If cbx_Fumigado.Checked Then vinf.dw_1.Modify("x3.Text = '" + 'X' + "'")
	If cbx_Tratado.Checked Then vinf.dw_1.Modify("x2.Text = '" + 'X' + "'")
	
	If rb_4.Checked Then
		vinf.dw_1.Modify("x5.Text = '" + '---' + "'")
		ls_bulto	=	'Cajas'
	Else	
		vinf.dw_1.Modify("x4.Text = '" + '---' + "'")
		ls_bulto	=	'Bins'
	End If

	vinf.dw_1.Modify("t_bulto.text = '" + ls_bulto + "'")
	
	vinf.Visible	= True
	vinf.Enabled	= True

	If rb_prod_agri.Checked OR rb_fumig_usa.Checked OR rb_usda.Checked OR rb_fumig.Checked OR rb_fumig_mexico.Checked Then
		Rescata_Origen(uo_SelCliente.Codigo, uo_SelPlanta.Codigo,ll_Planilla_sag,is_tipopla,li_prdrot)
	End If
		
	If Not rb_fumig_usa.Checked Or Not rb_fumig_mexico.Checked Then vinf.dw_1.SetItem(12, "defe_glosag", ls_glosa)
	
	If cbx_usdainpe.Checked	 OR  cbx_origen.Checked OR cbx_usda.Checked OR cbx_oritrata.Checked Then
		vinf.dw_1.Modify("t_ubicacion.text = '" + is_nomregion+','+is_nomprovi+','+is_comnombre + "'")
		vinf.dw_1.Modify("t_numsellos.text = '" + em_sellos.Text + "'")
		
		If em_nomdespachador.text = '' Then
			vinf.dw_1.Modify("t_nomdespachador.text = '" + em_nominspector.text + "'")	
		Else
			vinf.dw_1.Modify("t_nomdespachador.text = '" + em_nominspector.text +' / '+em_nomdespachador.text + "'")
		End If	
	End If
	vinf.dw_1.SetRedraw(True)
End If

SetPointer(Arrow!)
end event

type pb_salir from w_para_informes`pb_salir within w_info_planilla_despacho
string tag = "Salir [Cerrar Ventana Activa]"
integer x = 4512
integer y = 1464
integer taborder = 290
string powertiptext = "Salir [Cerrar Ventana Activa]"
end type

type st_4 from statictext within w_info_planilla_despacho
integer x = 27
integer y = 676
integer width = 4352
integer height = 160
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16711680
boolean enabled = false
boolean border = true
borderstyle borderstyle = styleraised!
boolean focusrectangle = false
end type

type st_1 from statictext within w_info_planilla_despacho
integer x = 3063
integer y = 728
integer width = 229
integer height = 60
boolean bringtotop = true
integer textsize = -8
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Planta"
boolean focusrectangle = false
end type

type st_6 from statictext within w_info_planilla_despacho
integer x = 1957
integer y = 728
integer width = 219
integer height = 60
boolean bringtotop = true
integer textsize = -8
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Cliente"
boolean focusrectangle = false
end type

type em_fecha from editmask within w_info_planilla_despacho
integer x = 448
integer y = 716
integer width = 352
integer height = 84
integer taborder = 20
boolean bringtotop = true
integer textsize = -8
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
string text = "none"
alignment alignment = center!
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = datemask!
string mask = "dd/mm/yyyy"
end type

type st_3 from statictext within w_info_planilla_despacho
integer x = 73
integer y = 728
integer width = 384
integer height = 60
boolean bringtotop = true
integer textsize = -8
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Fecha Emisión"
boolean focusrectangle = false
end type

type st_2 from statictext within w_info_planilla_despacho
integer x = 814
integer y = 728
integer width = 366
integer height = 60
boolean bringtotop = true
integer textsize = -8
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Planilla S.A.G."
boolean focusrectangle = false
end type

type em_planilla from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 1221
integer y = 716
integer width = 343
integer height = 84
integer taborder = 30
boolean bringtotop = true
integer textsize = -8
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
alignment alignment = center!
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

event modified;IF ExistePlanilla(Long(This.Text)) = False THEN
	This.SetFocus()
ELSE
	em_nrodespacho.Text	=	This.Text
END IF
end event

type em_fecha_des from editmask within w_info_planilla_despacho
integer x = 1573
integer y = 716
integer width = 343
integer height = 84
boolean bringtotop = true
integer textsize = -8
integer weight = 700
fontcharset fontcharset = vietnamesecharset!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "none"
alignment alignment = center!
boolean displayonly = true
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = datemask!
string mask = "dd/mm/yyyy"
end type

type gb_3 from groupbox within w_info_planilla_despacho
integer x = 59
integer y = 380
integer width = 4265
integer height = 268
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Planilla de Despacho"
end type

type st_5 from statictext within w_info_planilla_despacho
integer x = 27
integer y = 372
integer width = 4352
integer height = 304
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long backcolor = 16711680
boolean border = true
borderstyle borderstyle = styleraised!
boolean focusrectangle = false
end type

type rb_prod_agri from radiobutton within w_info_planilla_despacho
integer x = 142
integer y = 452
integer width = 1221
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Productos Agr. Export. Certificados"
boolean checked = true
end type

event clicked;mle_Condicion.Text	=	'FRESCO'
mle_Producto.Text		=	'UVAS FRESCAS'

is_tipopla	=	'1'

//IF This.Checked THEN
//	cbx_2.Visible	=	False
//	cbx_3.Visible	=	False
//	cbx_4.Visible	=	False
//ELSE
//	rb_1.Visible	=	True
//	rb_2.Visible	=	True
//	rb_3.Visible	=	True
//END IF


end event

type rb_fumig_usa from radiobutton within w_info_planilla_despacho
integer x = 3013
integer y = 456
integer width = 1056
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Fruta a ser Fumigada en U.S.A."
end type

event clicked;mle_Condicion.Text	=	'FUMIGACION EN DESTINO'

is_tipopla	=	'3'

//IF This.Checked THEN
//	cbx_2.Visible	=	False
//	cbx_3.Visible	=	False
//	cbx_4.Visible	=	False
//ELSE
//	rb_1.Visible	=	True
//	rb_2.Visible	=	True
//	rb_3.Visible	=	True
//END IF
end event

type rb_fumig from radiobutton within w_info_planilla_despacho
integer x = 142
integer y = 548
integer width = 1051
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Fumigados"
end type

event clicked;is_tipopla	=	'4'

//IF This.Checked THEN
//	cbx_2.Visible	=	False
//	cbx_3.Visible	=	False
//	cbx_4.Visible	=	False
//ELSE
//	rb_1.Visible	=	True
//	rb_2.Visible	=	True
//	rb_3.Visible	=	True
//END IF
end event

type rb_usda from radiobutton within w_info_planilla_despacho
integer x = 1550
integer y = 456
integer width = 1339
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Productos Agr.Export. Certificados (USDA)"
end type

event clicked;mle_Condicion.Text	=	'INSPECCION SAG/USDA'
mle_Producto.Text		=	'ESPECIE FRESCAS'

is_tipopla	=	'2'

//IF This.Checked THEN
//	cbx_2.Visible	=	True
//	cbx_3.Visible	=	True
//	cbx_4.Visible	=	True
//ELSE
//	rb_1.Visible	=	False
//	rb_2.Visible	=	False
//	rb_3.Visible	=	False
//END IF


end event

type cbx_varirot from checkbox within w_info_planilla_despacho
integer x = 165
integer y = 2580
integer width = 649
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long backcolor = 12632256
string text = "Variedad Rotulada"
boolean checked = true
end type

event clicked;IF This.Checked THEN
	ii_var =	1	
ELSE
	ii_var =	0
END IF

end event

type cbx_1 from checkbox within w_info_planilla_despacho
integer x = 96
integer y = 848
integer width = 576
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Cliente Rotulado"
end type

event clicked;String	ls_nombre, ls_nombrerot, ls_clienterot, ls_cliente

IF This.Checked THEN
	ii_cli =	1	
	
	SELECT clie_rnrrut,clie_rnombr
	INTO :ls_clienterot,:ls_nombrerot
	FROM dbo.clientesprod
	WHERE clie_codigo = :uo_SelCliente.Codigo;
	
	em_rut.Text = ls_clienterot
	em_exportador.Text = ls_nombrerot
	
ELSE
	ii_cli =	0
	SELECT clie_nrorut,clie_nombre
	INTO :ls_cliente,:ls_nombre
	FROM dbo.clientesprod
	WHERE clie_codigo = :uo_SelCliente.Codigo;
	
	em_rut.Text = ls_cliente
	em_exportador.Text = ls_nombre
END IF



end event

type st_10 from statictext within w_info_planilla_despacho
integer x = 1911
integer y = 1224
integer width = 293
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 33554431
long backcolor = 553648127
boolean enabled = false
string text = "Ubicación "
boolean focusrectangle = false
end type

type st_11 from statictext within w_info_planilla_despacho
integer x = 59
integer y = 1128
integer width = 763
integer height = 64
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Nro.Despacho Sag/Usda   "
boolean focusrectangle = false
end type

type st_12 from statictext within w_info_planilla_despacho
integer x = 59
integer y = 1220
integer width = 658
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 33554431
long backcolor = 553648127
boolean enabled = false
string text = "Números de Sellos"
boolean focusrectangle = false
end type

type st_13 from statictext within w_info_planilla_despacho
integer x = 59
integer y = 1316
integer width = 658
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Nombre Despachador "
boolean focusrectangle = false
end type

type em_cansellos from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 1733
integer y = 1216
integer width = 160
integer height = 84
integer taborder = 110
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
alignment alignment = center!
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type em_ubisellos from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 2203
integer y = 1216
integer width = 535
integer height = 84
integer taborder = 160
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type em_numsellos from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 786
integer y = 1216
integer width = 777
integer height = 84
integer taborder = 90
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type em_nomdespachador from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 786
integer y = 1304
integer width = 1952
integer height = 84
integer taborder = 200
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type st_14 from statictext within w_info_planilla_despacho
integer x = 59
integer y = 1492
integer width = 635
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Tratamiento"
boolean focusrectangle = false
end type

type em_nrodespacho from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 786
integer y = 1128
integer width = 443
integer height = 84
integer taborder = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
alignment alignment = center!
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type st_15 from statictext within w_info_planilla_despacho
integer x = 23
integer y = 956
integer width = 2738
integer height = 152
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16711680
boolean enabled = false
boolean border = true
borderstyle borderstyle = styleraised!
boolean focusrectangle = false
end type

type em_exportador from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 786
integer y = 988
integer width = 1161
integer height = 84
integer taborder = 50
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type em_rut from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 2203
integer y = 988
integer width = 535
integer height = 84
integer taborder = 60
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
alignment alignment = center!
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string mask = "###.###.###-a"
string displaydata = "$"
end type

type st_16 from statictext within w_info_planilla_despacho
integer x = 114
integer y = 996
integer width = 448
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Exportador"
boolean focusrectangle = false
end type

type st_17 from statictext within w_info_planilla_despacho
integer x = 2080
integer y = 996
integer width = 114
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Rut"
boolean focusrectangle = false
end type

type cbx_prdrot from checkbox within w_info_planilla_despacho
boolean visible = false
integer x = 2199
integer y = 2004
integer width = 663
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 16777215
string text = "Productor Rotulado"
boolean checked = true
end type

type cbx_calrot from checkbox within w_info_planilla_despacho
boolean visible = false
integer x = 2994
integer y = 2004
integer width = 608
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 16777215
string text = "Calibre Rotulado"
end type

type rb_4 from radiobutton within w_info_planilla_despacho
integer x = 2811
integer y = 1228
integer width = 402
integer height = 68
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "PALLET"
boolean checked = true
end type

type rb_5 from radiobutton within w_info_planilla_despacho
integer x = 3264
integer y = 1224
integer width = 265
integer height = 68
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "BINS"
end type

type st_19 from statictext within w_info_planilla_despacho
integer x = 2766
integer y = 1212
integer width = 1614
integer height = 96
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16711680
boolean enabled = false
boolean border = true
borderstyle borderstyle = styleraised!
boolean focusrectangle = false
end type

type rb_fumig_mexico from radiobutton within w_info_planilla_despacho
integer x = 1550
integer y = 548
integer width = 1051
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Fruta a ser Fumigada en México"
end type

event clicked;is_tipopla	=	'5'

//IF This.Checked THEN
//	cbx_2.Visible	=	False
//	cbx_3.Visible	=	False
//	cbx_4.Visible	=	False
//ELSE
//	rb_1.Visible	=	True
//	rb_2.Visible	=	True
//	rb_3.Visible	=	True
//END IF
end event

type mle_tratamiento from multilineedit within w_info_planilla_despacho
integer x = 786
integer y = 1480
integer width = 1952
integer height = 124
integer taborder = 130
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
boolean autohscroll = true
borderstyle borderstyle = stylelowered!
end type

type st_7 from statictext within w_info_planilla_despacho
integer x = 1531
integer y = 1632
integer width = 494
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Pto/ Destino"
boolean focusrectangle = false
end type

type em_puerto from multilineedit within w_info_planilla_despacho
integer x = 1989
integer y = 1620
integer width = 745
integer height = 88
integer taborder = 180
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
boolean autohscroll = true
borderstyle borderstyle = stylelowered!
end type

type st_20 from statictext within w_info_planilla_despacho
integer x = 59
integer y = 1400
integer width = 658
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Inspector SAG"
boolean focusrectangle = false
end type

type em_nominspector from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 786
integer y = 1392
integer width = 1952
integer height = 84
integer taborder = 240
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type cbx_tratado from checkbox within w_info_planilla_despacho
integer x = 2903
integer y = 1092
integer width = 837
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Tratado en Destino"
end type

type mle_codsagtrat from multilineedit within w_info_planilla_despacho
integer x = 786
integer y = 1620
integer width = 736
integer height = 88
integer taborder = 210
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
integer limit = 20
borderstyle borderstyle = stylelowered!
end type

type st_21 from statictext within w_info_planilla_despacho
integer x = 59
integer y = 1624
integer width = 663
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Cod. SAG Tratamiento"
boolean focusrectangle = false
end type

type st_22 from statictext within w_info_planilla_despacho
integer x = 59
integer y = 1720
integer width = 663
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Condición"
boolean focusrectangle = false
end type

type st_23 from statictext within w_info_planilla_despacho
integer x = 1531
integer y = 1720
integer width = 320
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Producto"
boolean focusrectangle = false
end type

type st_24 from statictext within w_info_planilla_despacho
integer x = 1531
integer y = 1812
integer width = 471
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Tipo De Envase"
boolean focusrectangle = false
end type

type st_25 from statictext within w_info_planilla_despacho
integer x = 59
integer y = 1812
integer width = 640
integer height = 76
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Tipo Unidad Medida"
boolean focusrectangle = false
end type

type mle_condicion from multilineedit within w_info_planilla_despacho
integer x = 786
integer y = 1712
integer width = 736
integer height = 88
integer taborder = 220
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
string text = "FRESCO"
integer limit = 20
borderstyle borderstyle = stylelowered!
end type

type mle_medida from multilineedit within w_info_planilla_despacho
integer x = 786
integer y = 1804
integer width = 736
integer height = 88
integer taborder = 260
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
string text = "KILOS"
integer limit = 20
borderstyle borderstyle = stylelowered!
end type

type mle_producto from multilineedit within w_info_planilla_despacho
integer x = 1989
integer y = 1712
integer width = 745
integer height = 88
integer taborder = 230
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
string text = "FRUTA"
boolean autohscroll = true
borderstyle borderstyle = stylelowered!
end type

type mle_envase from multilineedit within w_info_planilla_despacho
integer x = 1989
integer y = 1804
integer width = 745
integer height = 88
integer taborder = 270
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
string text = "CAJAS"
boolean autohscroll = true
borderstyle borderstyle = stylelowered!
end type

type cbx_inspeccion from checkbox within w_info_planilla_despacho
integer x = 2903
integer y = 892
integer width = 837
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Inspección SAG / USDA"
end type

type cbx_fumigado from checkbox within w_info_planilla_despacho
integer x = 2903
integer y = 992
integer width = 837
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Fumigado / Tratado"
end type

type cbx_sag from checkbox within w_info_planilla_despacho
integer x = 1243
integer y = 1132
integer width = 393
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Visualiza"
boolean checked = true
end type

type dw_planilla from datawindow within w_info_planilla_despacho
boolean visible = false
integer x = 1582
integer y = 1976
integer width = 192
integer height = 144
boolean bringtotop = true
boolean enabled = false
string title = "none"
string dataobject = "dw_recuperadespadeplanilla"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type dw_3 from datawindow within w_info_planilla_despacho
boolean visible = false
integer x = 1385
integer y = 1972
integer width = 187
integer height = 148
boolean bringtotop = true
boolean enabled = false
string title = "none"
string dataobject = "dw_ubicacionessellossag"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type st_27 from statictext within w_info_planilla_despacho
integer x = 1710
integer y = 860
integer width = 279
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Provincia"
boolean focusrectangle = false
end type

type st_28 from statictext within w_info_planilla_despacho
integer x = 2249
integer y = 860
integer width = 270
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Comuna"
boolean focusrectangle = false
end type

type st_29 from statictext within w_info_planilla_despacho
integer x = 1225
integer y = 860
integer width = 229
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Región"
boolean focusrectangle = false
end type

type st_8 from statictext within w_info_planilla_despacho
integer x = 27
integer y = 840
integer width = 791
integer height = 116
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16711680
boolean border = true
borderstyle borderstyle = styleraised!
boolean focusrectangle = false
end type

type em_region from singlelineedit within w_info_planilla_despacho
integer x = 1454
integer y = 860
integer width = 238
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = vietnamesecharset!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
integer limit = 2
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type em_provi from singlelineedit within w_info_planilla_despacho
integer x = 1998
integer y = 860
integer width = 238
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = vietnamesecharset!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
integer limit = 2
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type em_comuna from singlelineedit within w_info_planilla_despacho
integer x = 2501
integer y = 860
integer width = 238
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = vietnamesecharset!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
integer limit = 2
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type cbx_5 from checkbox within w_info_planilla_despacho
integer x = 850
integer y = 856
integer width = 352
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Modifica"
end type

event clicked;IF This.Checked THEN
	st_27.Enabled	=	True
	st_28.Enabled	=	True
	st_29.Enabled	=	True
	
	em_region.Enabled	=	True
	em_provi.Enabled	=	True
	em_comuna.Enabled	=	True
ELSE
	st_27.Enabled	=	False
	st_28.Enabled	=	False
	st_29.Enabled	=	False
	
	em_region.Enabled	=	False
	em_provi.Enabled	=	False
	em_comuna.Enabled	=	False
END IF

end event

type st_30 from statictext within w_info_planilla_despacho
integer x = 814
integer y = 840
integer width = 1947
integer height = 116
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16711680
boolean border = true
borderstyle borderstyle = styleraised!
boolean focusrectangle = false
end type

type dw_4 from datawindow within w_info_planilla_despacho
boolean visible = false
integer x = 1266
integer y = 1964
integer width = 233
integer height = 168
integer taborder = 70
boolean bringtotop = true
string title = "none"
string dataobject = "dw_validadatossag"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type st_18 from statictext within w_info_planilla_despacho
integer x = 2761
integer y = 836
integer width = 1614
integer height = 376
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 16711680
boolean enabled = false
boolean border = true
borderstyle borderstyle = styleraised!
boolean focusrectangle = false
end type

type st_9 from statictext within w_info_planilla_despacho
integer x = 23
integer y = 1112
integer width = 2738
integer height = 860
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16711680
boolean enabled = false
boolean border = true
borderstyle borderstyle = styleraised!
boolean focusrectangle = false
end type

type st_32 from statictext within w_info_planilla_despacho
integer x = 2254
integer y = 1136
integer width = 169
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "CSP"
boolean focusrectangle = false
end type

type em_csp from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 2405
integer y = 1128
integer width = 334
integer height = 84
integer taborder = 190
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type st_33 from statictext within w_info_planilla_despacho
integer x = 1573
integer y = 1224
integer width = 165
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 33554431
long backcolor = 553648127
boolean enabled = false
string text = "Cant."
boolean focusrectangle = false
end type

type cbx_origen from checkbox within w_info_planilla_despacho
integer x = 2903
integer y = 1352
integer width = 361
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "ORIGEN"
end type

event clicked;IF This.Checked THEN
	cbx_usdainpe.Checked	 	= False
	//cbx_origen.Checked  	= False
	cbx_usda.Checked  		= False
	cbx_oritrata.Checked  	= False

END IF	
	
IF cbx_usdainpe.Checked	 OR  cbx_origen.Checked OR	cbx_usda.Checked OR	cbx_oritrata.Checked THEN
	st_12.Visible = False
	em_numsellos.Visible = False
	st_33.Visible = False
	em_cansellos.Visible = False
	st_10.Visible = False
	em_ubisellos.Visible = False
	st_sellos.Visible = True
	em_sellos.Visible = True
ELSE	
	st_12.Visible = True
	em_numsellos.Visible = True
	st_33.Visible = True
	em_cansellos.Visible = True
	st_10.Visible = True
	em_ubisellos.Visible = True
	st_sellos.Visible = False
	em_sellos.Visible = False
END IF	
end event

type cbx_oritrata from checkbox within w_info_planilla_despacho
integer x = 3351
integer y = 1352
integer width = 649
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Origen Tratamiento"
end type

event clicked;IF This.Checked THEN
	cbx_usdainpe.Checked	 	= False
	cbx_origen.Checked  		= False
	cbx_usda.Checked  		= False
	//cbx_oritrata.Checked  = False
END IF	

IF cbx_usdainpe.Checked	 OR  cbx_origen.Checked OR	cbx_usda.Checked OR	cbx_oritrata.Checked THEN
	st_12.Visible = False
	em_numsellos.Visible = False
	st_33.Visible = False
	em_cansellos.Visible = False
	st_10.Visible = False
	em_ubisellos.Visible = False
	st_sellos.Visible = True
	em_sellos.Visible = True
ELSE	
	st_12.Visible = True
	em_numsellos.Visible = True
	st_33.Visible = True
	em_cansellos.Visible = True
	st_10.Visible = True
	em_ubisellos.Visible = True
	st_sellos.Visible = False
	em_sellos.Visible = False
END IF	
end event

type cbx_usda from checkbox within w_info_planilla_despacho
integer x = 2903
integer y = 1476
integer width = 361
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "USDA"
end type

event clicked;IF This.Checked THEN
	cbx_usdainpe.Checked	 	= False
	cbx_origen.Checked  		= False
	//cbx_usda.Checked  		= False
	cbx_oritrata.Checked  = False
END IF	

IF cbx_usdainpe.Checked	 OR  cbx_origen.Checked OR	cbx_usda.Checked OR	cbx_oritrata.Checked THEN
	st_12.Visible = False
	em_numsellos.Visible = False
	st_33.Visible = False
	em_cansellos.Visible = False
	st_10.Visible = False
	em_ubisellos.Visible = False
	st_sellos.Visible = True
	em_sellos.Visible = True
ELSE	
	st_12.Visible = True
	em_numsellos.Visible = True
	st_33.Visible = True
	em_cansellos.Visible = True
	st_10.Visible = True
	em_ubisellos.Visible = True
	st_sellos.Visible = False
	em_sellos.Visible = False
END IF	
end event

type cbx_usdainpe from checkbox within w_info_planilla_despacho
integer x = 3351
integer y = 1476
integer width = 686
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "USDA Inspeccionado"
end type

event clicked;IF This.Checked THEN
	//cbx_usdainpe.Checked	 	= False
	cbx_origen.Checked  		= False
	cbx_usda.Checked  		= False
	cbx_oritrata.Checked  = False
END IF	

IF cbx_usdainpe.Checked	 OR  cbx_origen.Checked OR	cbx_usda.Checked OR	cbx_oritrata.Checked THEN
	st_12.Visible = False
	em_numsellos.Visible = False
	st_33.Visible = False
	em_cansellos.Visible = False
	st_10.Visible = False
	em_ubisellos.Visible = False
	st_sellos.Visible = True
	em_sellos.Visible = True
ELSE	
	st_12.Visible = True
	em_numsellos.Visible = True
	st_33.Visible = True
	em_cansellos.Visible = True
	st_10.Visible = True
	em_ubisellos.Visible = True
	st_sellos.Visible = False
	em_sellos.Visible = False
END IF	
end event

type st_35 from statictext within w_info_planilla_despacho
integer x = 2789
integer y = 1608
integer width = 443
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Número SPS"
boolean focusrectangle = false
end type

type em_sps from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 3296
integer y = 1588
integer width = 443
integer height = 84
integer taborder = 100
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
alignment alignment = center!
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type st_36 from statictext within w_info_planilla_despacho
integer x = 2789
integer y = 1696
integer width = 489
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Tipo Producción"
boolean focusrectangle = false
end type

type em_tipoprodu from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 3296
integer y = 1680
integer width = 983
integer height = 84
integer taborder = 120
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
string text = "CONVENCIONAL"
textcase textcase = upper!
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type st_37 from statictext within w_info_planilla_despacho
integer x = 2789
integer y = 1792
integer width = 489
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Fecha Registro"
boolean focusrectangle = false
end type

type st_38 from statictext within w_info_planilla_despacho
integer x = 2789
integer y = 1884
integer width = 489
integer height = 72
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Fecha Envío"
boolean focusrectangle = false
end type

type em_fecharegistro from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 3296
integer y = 1772
integer width = 425
integer height = 84
integer taborder = 140
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
alignment alignment = center!
textcase textcase = upper!
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = datetimemask!
string mask = "dd/mm/yyyy hh:mm"
string displaydata = "$"
end type

type em_fechaenvio from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
integer x = 3296
integer y = 1864
integer width = 425
integer height = 84
integer taborder = 170
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
alignment alignment = center!
textcase textcase = upper!
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = datetimemask!
string mask = "dd/mm/yyyy hh:mm"
string displaydata = "$"
end type

type st_sellos from statictext within w_info_planilla_despacho
boolean visible = false
integer x = 55
integer y = 1220
integer width = 658
integer height = 84
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
boolean enabled = false
string text = "Sellos"
boolean focusrectangle = false
end type

type em_sellos from editmask within w_info_planilla_despacho
event getfocus pbm_ensetfocus
boolean visible = false
integer x = 786
integer y = 1216
integer width = 1952
integer height = 84
integer taborder = 150
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16777215
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = stringmask!
string displaydata = "$"
end type

type rb_anexo from radiobutton within w_info_planilla_despacho
integer x = 3013
integer y = 548
integer width = 1056
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Anexo Medida Mitigación"
end type

event clicked;is_tipopla	=	'3'

//IF This.Checked THEN
//	cbx_2.Visible	=	False
//	cbx_3.Visible	=	False
//	cbx_4.Visible	=	False
//ELSE
//	rb_1.Visible	=	True
//	rb_2.Visible	=	True
//	rb_3.Visible	=	True
//END IF
end event

type uo_selplanta from uo_seleccion_plantas within w_info_planilla_despacho
integer x = 3351
integer y = 716
integer height = 84
integer taborder = 40
boolean bringtotop = true
end type

on uo_selplanta.destroy
call uo_seleccion_plantas::destroy
end on

event ue_cambio;call super::ue_cambio;If IsNull(This.Codigo) Then Return

em_region.Text 	= String(This.Region)
em_provi.Text		= String(This.ProvinciaSAG)
em_comuna.Text	= String(This.ComunaSAG)

SELECT regi_nombre
INTO :is_nomregion
FROM dbo.regiones
WHERE regi_codigo = :This.Region;

SELECT prov_nombre
INTO :is_nomprovi
FROM dbo.provincias
WHERE regi_codigo = :This.Region
AND prov_codigo = :This.ProvinciaSAG;

SELECT comu_nombre
INTO :is_comnombre
FROM dbo.comunasexp
WHERE regi_codigo = :This.Region
AND prov_codigo = :This.ProvinciaSAG
AND comu_codigo = :Comuna;
end event

type uo_selcliente from uo_seleccion_clientesprod within w_info_planilla_despacho
integer x = 2149
integer y = 716
integer height = 84
integer taborder = 250
boolean bringtotop = true
end type

event ue_cambio;call super::ue_cambio;If BuscaNombre(This.Codigo) Then
	em_exportador.Text = is_nombre
	em_rut.Text = is_rut
End If
end event

on uo_selcliente.destroy
call uo_seleccion_clientesprod::destroy
end on

type cbx_recibidor from checkbox within w_info_planilla_despacho
boolean visible = false
integer x = 3625
integer y = 1220
integer width = 645
integer height = 80
boolean bringtotop = true
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long textcolor = 16777215
long backcolor = 553648127
string text = "Visualiza Recibidor"
boolean checked = true
end type

type st_34 from statictext within w_info_planilla_despacho
integer x = 2761
integer y = 1312
integer width = 1614
integer height = 660
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Tahoma"
long backcolor = 16711680
boolean enabled = false
boolean border = true
borderstyle borderstyle = styleraised!
boolean focusrectangle = false
end type

